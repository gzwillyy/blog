{"title":"CentOS8 安装 Docker Engine(Docker CE) 及 Docker Compose","uid":"8dfd1c27e715ba69975506c84ee456c0","slug":"centos8-install-docker","date":"2023-01-11T04:10:02.000Z","updated":"2023-01-11T04:10:02.000Z","comments":true,"path":"api/articles/centos8-install-docker.json","keywords":null,"cover":"https://images.unsplash.com/photo-1646627927863-19874c27316b","content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p><strong>相关文档</strong></p>\n<p><strong><a href=\"https://docs.docker.com/engine/install/centos\"><code>Docker</code> 官方文档</a></strong></p>\n<p><strong><a href=\"https://github.com/docker/compose/releases\"><code>Docker Compose</code> 版本发布页</a></strong></p></blockquote>\n<h2 id=\"添加存储库\"><a href=\"#添加存储库\" class=\"headerlink\" title=\"添加存储库\"></a>添加存储库</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">dnf config-manager --add-repo<span class=\"token operator\">=</span>https://download.docker.com/linux/centos/docker-ce.repo<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"安装Docker包\"><a href=\"#安装Docker包\" class=\"headerlink\" title=\"安装Docker包\"></a>安装<code>Docker</code>包</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">dnf <span class=\"token function\">install</span> docker-ce docker-ce-cli containerd.io<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"设置自启动\"><a href=\"#设置自启动\" class=\"headerlink\" title=\"设置自启动\"></a>设置自启动</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">systemctl <span class=\"token builtin class-name\">enable</span> <span class=\"token parameter variable\">--now</span> <span class=\"token function\">docker</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<h2 id=\"防火墙规则\"><a href=\"#防火墙规则\" class=\"headerlink\" title=\"防火墙规则\"></a>防火墙规则</h2><p><strong><code>CentOS 8</code> 使用 <code>Docker</code> 以外的防火墙。因此，如果启用了 <code>firewalld</code>，则需要向其添加伪装规则。</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">firewall-cmd <span class=\"token parameter variable\">--zone</span><span class=\"token operator\">=</span>public --add-masquerade <span class=\"token parameter variable\">--permanent</span>\nfirewall-cmd <span class=\"token parameter variable\">--reload</span><span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span></span></code></pre>\n\n<h2 id=\"手动安装-Docker-Compose-二进制运行文件\"><a href=\"#手动安装-Docker-Compose-二进制运行文件\" class=\"headerlink\" title=\"手动安装 Docker Compose 二进制运行文件\"></a>手动安装 <code>Docker Compose</code> 二进制运行文件</h2><p><strong><code>Docker</code> 通常与 <code>Docker Compose</code> 一起安装。正是这个实用程序允许您使用一个命令将项目部署到另一台机器。要下载它，请运行以下命令：</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> <span class=\"token parameter variable\">-L</span> <span class=\"token string\">\"https://github.com/docker/compose/releases/download/v2.15.1/docker-compose-<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">uname</span> <span class=\"token parameter variable\">-s</span><span class=\"token variable\">)</span></span>-<span class=\"token variable\"><span class=\"token variable\">$(</span><span class=\"token function\">uname</span> <span class=\"token parameter variable\">-m</span><span class=\"token variable\">)</span></span>\"</span> <span class=\"token parameter variable\">-o</span> /usr/bin/docker-compose\n<span class=\"token function\">chmod</span> +x /usr/bin/docker-compose\n<span class=\"token function\">docker-compose</span> version<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span><span></span><span></span></span></code></pre>\n\n<h2 id=\"以非-root-用户身份使用-Docker\"><a href=\"#以非-root-用户身份使用-Docker\" class=\"headerlink\" title=\"以非 root 用户身份使用 Docker\"></a>以非 <code>root</code> 用户身份使用 <code>Docker</code></h2><p><strong>为了能够以非 <code>root</code> 用户身份使用 <code>Docker</code>，您必须将该用户添加到 <code>docker 组</code>。</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-aG</span> <span class=\"token function\">docker</span> username<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n<p>将用户名替换为所需的用户名。执行此命令后，他将需要退出系统并重新登录。<br>注意！该组的用户可以控制 <code>Docker</code> 主机。</p>\n<h2 id=\"Docker-测试容器运行\"><a href=\"#Docker-测试容器运行\" class=\"headerlink\" title=\"Docker 测试容器运行\"></a><code>Docker</code> 测试容器运行</h2><p>您可以通过运行测试容器来验证 <code>Docker</code> 是否正常工作。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run hello-world<span aria-hidden=\"true\" class=\"line-numbers-rows\"><span></span></span></code></pre>\n\n\n<hr>\n","text":" 相关文档 Docker 官方文档 Docker Compose 版本发布页 添加存储库dnf config-manager --add-repo=https://download.docker.com/linux/centos/docker-ce.repo 安装Docker包d...","link":"","photos":[],"count_time":{"symbolsCount":896,"symbolsTime":"1 mins."},"categories":[{"name":"Notes","slug":"Notes","count":3,"path":"api/categories/Notes.json"}],"tags":[{"name":"Centos8","slug":"Centos8","count":3,"path":"api/tags/Centos8.json"},{"name":"Docker","slug":"Docker","count":1,"path":"api/tags/Docker.json"},{"name":"Docker Compose","slug":"Docker-Compose","count":1,"path":"api/tags/Docker-Compose.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%B7%BB%E5%8A%A0%E5%AD%98%E5%82%A8%E5%BA%93\"><span class=\"toc-text\">添加存储库</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85Docker%E5%8C%85\"><span class=\"toc-text\">安装Docker包</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">设置自启动</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E9%98%B2%E7%81%AB%E5%A2%99%E8%A7%84%E5%88%99\"><span class=\"toc-text\">防火墙规则</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%89%8B%E5%8A%A8%E5%AE%89%E8%A3%85-Docker-Compose-%E4%BA%8C%E8%BF%9B%E5%88%B6%E8%BF%90%E8%A1%8C%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">手动安装 Docker Compose 二进制运行文件</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BB%A5%E9%9D%9E-root-%E7%94%A8%E6%88%B7%E8%BA%AB%E4%BB%BD%E4%BD%BF%E7%94%A8-Docker\"><span class=\"toc-text\">以非 root 用户身份使用 Docker</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Docker-%E6%B5%8B%E8%AF%95%E5%AE%B9%E5%99%A8%E8%BF%90%E8%A1%8C\"><span class=\"toc-text\">Docker 测试容器运行</span></a></li></ol>","author":{"name":"G","slug":"blog-author","avatar":"https://froggyfriends.mypinata.cloud/ipfs/QmaTJi8B2cH5QKiXz1XneEuDaL1WC71uuq2A1X9t4sfacT","link":"/","description":"一位正在重塑知识的技术人 <br />","socials":{"github":"https://github.com/gzwillyy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"telegram":{"icon":"/svg/telegram.svg","link":"https://t.me/gzwilly"}}}},"mapped":true,"prev_post":{"title":"微服务 之 幂等性机制","uid":"9e30b559063f2ec93bec62f6225da283","slug":"micro-idempotence","date":"2023-01-11T06:16:21.000Z","updated":"2023-01-11T06:16:21.000Z","comments":true,"path":"api/articles/micro-idempotence.json","keywords":null,"cover":"https://images.unsplash.com/photo-1667372459567-3853510dd5ce","text":"http请求的类型： get 获取商品信息， 这个会引起商品的数据的变化吗？ post 比较常见，这种接口需要考虑到幂等性 put 没有幂等的问题的情况：把1号商品的价格改为200，网络返回的时候抖动了，重试 ,第二次接口还是会把1号商品的价格改为200 出现幂等性问题的情况： ...","link":"","photos":[],"count_time":{"symbolsCount":"3.5k","symbolsTime":"3 mins."},"categories":[{"name":"Micro","slug":"Micro","count":3,"path":"api/categories/Micro.json"}],"tags":[{"name":"微服务","slug":"微服务","count":1,"path":"api/tags/微服务.json"},{"name":"幂等性机制","slug":"幂等性机制","count":1,"path":"api/tags/幂等性机制.json"},{"name":"幂等性解决方案","slug":"幂等性解决方案","count":1,"path":"api/tags/幂等性解决方案.json"}],"author":{"name":"G","slug":"blog-author","avatar":"https://froggyfriends.mypinata.cloud/ipfs/QmaTJi8B2cH5QKiXz1XneEuDaL1WC71uuq2A1X9t4sfacT","link":"/","description":"一位正在重塑知识的技术人 <br />","socials":{"github":"https://github.com/gzwillyy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"telegram":{"icon":"/svg/telegram.svg","link":"https://t.me/gzwilly"}}}}},"next_post":{"title":"CentOS8 安装 pyenv 进行Python版本管理","uid":"799caa19913ca1b7943f59953e293be8","slug":"centos8-install-pyenv","date":"2023-01-10T16:37:05.000Z","updated":"2023-01-10T16:37:05.000Z","comments":true,"path":"api/articles/centos8-install-pyenv.json","keywords":null,"cover":"https://images.unsplash.com/photo-1484417894907-623942c8ee29","text":"安装 pyenvcurl https://pyenv.run | bash pyenv 基本命令# 查看pyenv命令 pyenv commands # 查看可安装的python版本 pyenv install --list # 查看已安装版本 pyenv versions # ...","link":"","photos":[],"count_time":{"symbolsCount":424,"symbolsTime":"1 mins."},"categories":[{"name":"Notes","slug":"Notes","count":3,"path":"api/categories/Notes.json"}],"tags":[{"name":"Centos8","slug":"Centos8","count":3,"path":"api/tags/Centos8.json"},{"name":"Pyenv","slug":"Pyenv","count":1,"path":"api/tags/Pyenv.json"}],"author":{"name":"G","slug":"blog-author","avatar":"https://froggyfriends.mypinata.cloud/ipfs/QmaTJi8B2cH5QKiXz1XneEuDaL1WC71uuq2A1X9t4sfacT","link":"/","description":"一位正在重塑知识的技术人 <br />","socials":{"github":"https://github.com/gzwillyy","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"telegram":{"icon":"/svg/telegram.svg","link":"https://t.me/gzwilly"}}}}}}